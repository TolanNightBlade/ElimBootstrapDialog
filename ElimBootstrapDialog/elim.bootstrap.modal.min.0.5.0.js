(function(i,a){function l(p,o){return"[object "+o+"]"===Object.prototype.toString.call(p)}var h={},f=0,n=typeof Object.create==="function",g={Ok:{value:1,cssclass:"",icon:null,action:"ok",text:null},Cancel:{value:2,cssclass:"btn-warning",icon:null,action:"cancel",text:null},Yes:{value:4,cssclass:"",icon:null,action:"yes",text:null},No:{value:8,cssclass:"",icon:null,action:"no",text:null},Close:{value:16,cssclass:"",icon:null,action:"close",text:null},Save:{value:32,cssclass:"",icon:null,action:"save",text:null},Delete:{value:64,cssclass:"",icon:null,action:"delete",text:null},Confirm:{value:128,cssclass:"",icon:null,action:"confirm",text:null}},d={holderTemplate:'<div class="modal hide"></div>',headerTemplate:'<div class="modal-header"></div>',footerTemplate:'<div class="modal-footer"></div>',buttonTemplate:'<button type="button" class="btn"/>',icon:null,header:true,footer:true,backdrop:true,animate:true,showX:true,show:false,autoDestroy:true,width:null,height:null,locale:"en",buttons:g.Ok.value},b=a.extend({},d,{icon:"icon-exclamation-sign",buttons:g.Ok.value,autoDestroy:true});g.OkCancel=[g.Ok,g.Cancel];g.YesNo=[g.Yes,g.No];g.SaveCancel=[g.Save,g.Cancel];function m(){return"box-"+(++f)}function k(o){if(typeof o==="function"){return o()}else{return o}}function j(){var o=null,r,p,q;switch(arguments.length){case 1:q=arguments[0];r=q.title||"";p=q.message||"";delete q.title;delete q.message;break;case 2:r=arguments[0];p=arguments[1];q={};break;case 3:r=arguments[0];p=arguments[1];q=arguments[2];break;case 4:o=arguments[0];r=arguments[1];p=arguments[2];q=arguments[3];break;default:throw new Error("Invalid arguments length")}return[o,r,p,q]}function c(){var o=j.apply(null,arguments),r=o[1],p=o[2],q=o[3];this._id=m();this.id=o[0]||this._id;this.withOptions(q).withBody(p).withTitle(r);this.el.modal({keyboard:false,show:this.options.show,backdrop:this.options.backdrop}).on("shown",function(){this.runHandler(this.handlers.shown,"shown")}.bind(this)).on("hidden",function(){this.runHandler(this.handlers.hidden,"hidden");if(this.options.autoDestroy){this.destroy()}}.bind(this));return this}c.prototype={constructor:c,id:null,handlers:{},footer:null,header:null,body:null,_destroyed:false,_CheckCreated:function(){if(this.el===null||this.el===undefined){this.el=a(this.options.holderTemplate).append(this.header=a(this.options.headerTemplate)).append(this.body=a('<div class="modal-body box-area"></div>')).append(this.footer=a(this.options.footerTemplate));this.el.attr("id",this.id);this._createHeader(this.options.showX);a(i.body).append(this.el)}return this},_createHeader:function(p){var o=this.header;o.empty();if(p){o.append(a('<button class="close" data-dismiss="modal" aria-hidden="true">&times;</button>'))}o.append(a('<h4><i style="display:none;"></i><span></span></h4>'));return this},withOptions:function(o){if(o===null||o===undefined){o={}}this.options=a.extend({},d,this.options,o);this.handlers=this.options.handlers||{};delete this.options.handlers;this._CheckCreated();if(this.options.animate){this.el.addClass("fade")}else{this.el.removeClass("fade")}return this.hasHeader(this.options.header).hasFooter(this.options.footer).withButtons(this.options.buttons)},buttonMatchesFlag:function(p,o){return p.value&o===p.value},getButtonMatchFromArray:function(r,p){var o=[],q=0,s=r.length;for(q;q<s;q=(q+1)){if(this.buttonMatchesFlag(r[q],p)){o.push(r[q])}}return o},_getButtonsByNumber:function(p){var o=[],q,r;for(r in g){if(g.hasOwnProperty(r)){q=g[r];if(l(q,"Array")){o.concat(this.getButtonMatchFromArray(q,p))}else{if(this.buttonMatchesFlag(q,p)){o.push(q)}}}}return o},_getButtons:function(o){if(l(o,"Array")){return o}return[o]},_createButtons:function(o,q){var p=0,r=q.length;for(p;p<r;p=(p+1)){o.append(this._createButton(q[p]))}o.bind("click","button",function(v){var t=a(v.target),s=t.attr("data-action"),u=this.handlers[s],w=false;v.preventDefault();if(u){w=this.runHandler(u,s)}else{w=true}if(w){this.hide()}}.bind(this))},_createButton:function(p){var o=a(this.options.buttonTemplate);o.html(p.Text||p.action);o.attr("data-action",p.action);if(p.cssclass){o.addClass(p.cssclass)}if(p.icon){o.append(this._createIcon(p.icon))}return o},_createIcon:function(o){return a('<i class="'+o+'"></i>')},runHandler:function(s,o){var r=false,p=0,q;if(!s){return r}q=s.length;for(p;p<q;p=(1+1)){r=s[p](this,o);if(r){break}}return r},withButtons:function(o){var p=this.footer;p.empty();if(g===0){return this.hasFooter(false)}if(typeof o==="number"){this._createButtons(p,this._getButtonsByNumber(o))}else{this._createButtons(p,this._getButtons(o))}return this},withBody:function(o){this.body.html(k(o));return this},withTitle:function(q,p){var o=this.header;o.find("h4>span").html(k(q));if(p){if(p.cssclass){o.addClass(p.cssclass)}}if(this.options.icon){o.find("i").attr("class",this.options.icon).show()}else{o.find("i").hide()}return this},hasHeader:function(o){this.options.header=o;if(o){this.header.show()}else{this.header.hide()}return this},hasFooter:function(o){this.options.footer=o;if(o){this.footer.show()}else{this.footer.hide()}return this},show:function(){this.el.modal("show");return this},hide:function(){if(this.el!==null){this.el.modal("hide")}return this},destroy:function(){this.hide();if(this._destroyed){return}this.el.data("modal",null);this.el.empty().remove();this.header=null;this.footer=null;this.body=null;this.el=null;this._destroyed=true;h[this._id]=null;delete h[this._id]}};var e=function(){};e.prototype={_reg:function(o){h[o._id]=o},get:function(o){var q;for(q in h){if(h.hasOwnProperty(q)&&h[q].id===o){return h[q]}}return null},alert:function(){var o=j.apply(null,arguments);o[3]=a.extend({},b,o[3]);return this.dialog.apply(this,o)},dialog:function(){var o;if(n){o=this.dialogObjCreate(arguments)}else{o=this._dialognoObjCreate(arguments)}this._reg(o);return o},dialogObjCreate:function(p){var o=Object.create(c.prototype);return o.constructor.apply(o,p)},_dialognoObjCreate:function(q){var o=function(){},p;o.prototype=c.prototype;p=new o();c.apply(p,q);return p}};window.elimbox=c;window.elimboxes=new e();window.elimboxes["buttons"]=g})(document,window.jQuery);