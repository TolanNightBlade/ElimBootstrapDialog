(function(j,a){function m(r,q){return"[object "+q+"]"===Object.prototype.toString.call(r)}var h=[],f=0,i="en",p=typeof Object.create==="function",o={en:{ok:"Ok",cancel:"Cancel",save:"Save","delete":"Delete",confirm:"Confirm",yes:"Yes",no:"No"}},g={Ok:{value:1,cssclass:"",icon:null,action:"ok",text:null},Cancel:{value:2,cssclass:"btn-warning",icon:null,action:"cancel",text:null},Yes:{value:4,cssclass:"",icon:null,action:"yes",text:null},No:{value:8,cssclass:"",icon:null,action:"no",text:null},Close:{value:16,cssclass:"",icon:null,action:"close",text:null},Save:{value:32,cssclass:"",icon:null,action:"save",text:null},Delete:{value:64,cssclass:"",icon:null,action:"delete",text:null},Confirm:{value:128,cssclass:"",icon:null,action:"confirm",text:null}},d={holderTemplate:'<div class="modal hide"></div>',headerTemplate:'<div class="modal-header"></div>',footerTemplate:'<div class="modal-footer"></div>',buttonTemplate:'<button type="button" class="btn"/>',icon:null,header:true,footer:true,backdrop:true,animate:true,showX:true,show:false,autoDestroy:true,width:null,height:null,locale:"en",buttons:g.Ok.value},b=a.extend({},d,{icon:"icon-alert",buttons:g.Ok.value,autoDestroy:true});g.OkCancel=[g.Ok,g.Cancel];g.YesNo=[g.Yes,g.No];g.SaveCancel=[g.Save,g.Cancel];function n(){return"box-"+(++f)}function l(q){if(typeof q==="function"){return q()}else{return q}}function k(){var q=null,t,r,s;switch(arguments.length){case 1:s=arguments[0];t=s.title||"";r=s.message||"";delete s.title;delete s.message;break;case 2:t=arguments[0];r=arguments[1];s={};break;case 3:t=arguments[0];r=arguments[1];s=arguments[2];break;case 4:q=arguments[0];t=arguments[1];r=arguments[2];s=arguments[3];break;default:throw new Error("Invalid arguments length")}return[q,t,r,s]}function c(){var q=k.apply(null,arguments),t=q[1],r=q[2],s=q[3];this.id=q[0];if(!this.id||this.id===""){this.id=n()}this.withOptions(s).withBody(r).withTitle(t);this.el.modal({keyboard:false,show:this.options.show,backdrop:this.options.backdrop}).on("shown",function(){this.runHandler(this.handlers.shown,"shown")}.bind(this)).on("hidden",function(){this.runHandler(this.handlers.hidden,"hidden");if(this.options.autoDestroy){this.destroy()}}.bind(this));return this}c.prototype={constructor:c,id:null,handlers:{},footer:null,header:null,body:null,_destroyed:false,_CheckCreated:function(){if(this.el===null||this.el===undefined){this.el=a(this.options.holderTemplate).append(this.header=a(this.options.headerTemplate)).append(this.body=a('<div class="modal-body box-area"></div>')).append(this.footer=a(this.options.footerTemplate));this.el.attr("id",this.id);this._createHeader(this.options.showX);a(j.body).append(this.el)}return this},_createHeader:function(r){var q=this.header;q.empty();if(r){q.append(a('<button class="close" data-dismiss="modal" aria-hidden="true">&times;</button>'))}q.append(a("<h4></h4>"));return this},withOptions:function(q){if(q===null||q===undefined){q={}}this.options=a.extend({},d,this.options,q);this.handlers=this.options.handlers||{};delete this.options.handlers;this._CheckCreated();if(this.options.animate){this.el.addClass("fade")}else{this.el.removeClass("fade")}return this.hasHeader(this.options.header).hasFooter(this.options.footer).withButtons(this.options.buttons)},buttonMatchesFlag:function(r,q){return r.value&q===r.value},getButtonMatchFromArray:function(t,r){var q=[],s=0,u=t.length;for(s;s<u;s=(s+1)){if(this.buttonMatchesFlag(t[s],r)){q.push(t[s])}}return q},_getButtonsByNumber:function(r){var q=[],s,t;for(t in g){if(g.hasOwnProperty(t)){s=g[t];if(m(s,"Array")){q.concat(this.getButtonMatchFromArray(s,r))}else{if(this.buttonMatchesFlag(s,r)){q.push(s)}}}}return q},_getButtons:function(q){if(m(q,"Array")){return q}return[q]},_createButtons:function(q,s){var r=0,t=s.length;for(r;r<t;r=(r+1)){q.append(this._createButton(s[r]))}q.bind("click","button",function(x){var v=a(x.target),u=v.attr("data-action"),w=this.handlers[u],y=false;x.preventDefault();if(w){y=this.runHandler(w,u)}else{y=true}if(y){this.hide()}}.bind(this))},_createButton:function(r){var q=a(this.options.buttonTemplate);q.html(r.Text||r.action);q.attr("data-action",r.action);if(r.cssclass){q.addClass(r.cssclass)}if(r.icon){q.append(this._createIcon(r.icon))}return q},_createIcon:function(q){return a('<i class="'+q+'"></i>')},runHandler:function(u,q){var t=false,r=0,s;if(!u){return t}s=u.length;for(r;r<s;r=(1+1)){t=u[r](this,q);if(t){break}}return t},withButtons:function(q){var r=this.footer,s;r.empty();if(g===0){return this.hasFooter(false)}if(typeof q==="number"){this._createButtons(r,this._getButtonsByNumber(q))}else{this._createButtons(r,this._getButtons(q))}return this},withBody:function(q){this.body.html(l(q));return this},withTitle:function(s,r){var q=this.header;q.find("h4").html(l(s));if(r){if(r.cssclass){q.addClass(r.cssclass)}}return this},hasHeader:function(q){this.options.header=q;if(q){this.header.show()}else{this.header.hide()}return this},hasFooter:function(q){this.options.footer=q;if(q){this.footer.show()}else{this.footer.hide()}return this},show:function(){this.el.modal("show");return this},hide:function(){if(this.el!==null){this.el.modal("hide")}return this},destroy:function(){this.hide();if(this._destroyed){return}this.el.data("modal",null);this.el.empty().remove();this.header=null;this.footer=null;this.body=null;this.el=null;this._destroyed=true}};var e=function(){};e.prototype={alert:function(){var q=k.apply(null,arguments);q[3]=a.extend({},b,q[3]);return this.dialog.apply(this,q)},dialog:function(){if(p){return this.dialogObjCreate(arguments)}else{return this._dialognoObjCreate(arguments)}},dialogObjCreate:function(r){var q=Object.create(c.prototype);return q.constructor.apply(q,r)},_dialognoObjCreate:function(s){var q=function(){},r;q.prototype=c.prototype;r=new q();c.apply(r,s);return r}};window.elimbox=c;window.elimboxes=new e();window.elimboxes["buttons"]=g})(document,window.jQuery);