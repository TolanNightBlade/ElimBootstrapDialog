!function (t, e) { "use strict"; function n(t, e) { return "[object " + e + "]" === Object.prototype.toString.call(t) } function s(t) { return t.charAt(0).toUpperCase() + t.slice(1) } function o() { return "box-" + ++h } function i(t) { return "function" == typeof t ? t() : t } function a() { var t, e, n, s = null; switch (arguments.length) { case 1: n = arguments[0], t = n.title || "", e = n.message || "", delete n.title, delete n.message; break; case 2: t = arguments[0], e = arguments[1], n = {}; break; case 3: t = arguments[0], e = arguments[1], n = arguments[2]; break; case 4: s = arguments[0], t = arguments[1], e = arguments[2], n = arguments[3]; break; default: throw new Error("Invalid arguments length") } return [s, t, e, n] } function r() { var t = a.apply(null, arguments), e = t[1], n = t[2], s = t[3]; return this._id = o(), this.id = t[0] || this._id, this.withOptions(s).withBody(n).withTitle(e), this.el.modal({ keyboard: !1, show: this.options.show, backdrop: this.options.backdrop }).on("shown.bs.modal", function () { this.runHandler(this.handlers.shown, "shown") }.bind(this)).on("hidden.bs.modal", function () { this.runHandler(this.handlers.hidden, "hidden"), this.options.autoDestroy && this.destroy() }.bind(this)), this } var l = {}, h = 0, d = "function" == typeof Object.create, u = { Ok: { value: 1, cssclass: "btn-primary", icon: null, action: "ok", text: null }, Cancel: { value: 2, cssclass: "btn-warning", icon: null, action: "cancel", text: null }, Yes: { value: 4, cssclass: "btn-primary", icon: null, action: "yes", text: null }, No: { value: 8, cssclass: "btn-warning", icon: null, action: "no", text: null }, Close: { value: 16, cssclass: "btn-primary", icon: null, action: "close", text: null }, Save: { value: 32, cssclass: "btn-primary", icon: null, action: "save", text: null }, Delete: { value: 64, cssclass: "btn-danger", icon: null, action: "delete", text: null }, Confirm: { value: 128, cssclass: "btn-primary", icon: null, action: "confirm", text: null } }, c = { holderTemplate: '<div class="modal fade" role="dialog" aria-hidden="true"><div class="modal-dialog"><div class="modal-content"></div></div></div>', headerTemplate: '<div class="modal-header"></div>', bodyTemplate: '<div class="modal-body"></div>', footerTemplate: '<div class="modal-footer"></div>', buttonTemplate: '<button type="button" class="btn"/>', icon: null, header: !0, footer: !0, backdrop: !0, animate: !0, showX: !0, show: !1, autoDestroy: !0, width: null, height: null, locale: "en", buttons: u.Ok.value }, p = e.extend({}, c, { icon: "icon-exclamation-sign", buttons: u.Ok.value, autoDestroy: !0 }), f = e.extend({}, c, { showX: !1, backdrop: "static", holdercss: "model-fullscreen", buttons: 16 }); u.OkCancel = [u.Ok, u.Cancel], u.YesNo = [u.Yes, u.No], u.SaveCancel = [u.Save, u.Cancel], r.prototype = { constructor: r, id: null, handlers: {}, footer: null, header: null, body: null, _destroyed: !1, _CheckCreated: function () { return (null === this.el || void 0 === this.el) && (this.el = e(this.options.holderTemplate), this.el.find("div.modal-content").append(this.header = e(this.options.headerTemplate)).append(this.body = e(this.options.bodyTemplate)).append(this.footer = e(this.options.footerTemplate)), this.el.attr("id", this.id), this._createHeader(this.options.showX)), this }, _createHeader: function (t) { var n = this.header; return n.empty(), t && n.append(e('<button class="close" data-dismiss="modal" aria-hidden="true">&times;</button>')), n.append(e('<h4><i style="display:none;"></i><span></span></h4>')), this }, withOptions: function (t) { return (null === t || void 0 === t) && (t = {}), this.options = e.extend({}, c, this.options, t), this.handlers = this.options.handlers || {}, delete this.options.handlers, this._CheckCreated(), this.options.animate ? this.el.addClass("fade") : this.el.removeClass("fade"), "string" == typeof this.options.cssclass && this.el.addClass(this.options.cssclass), this.options.dialogcss && this.body.addClass(this.options.dialogcss), this.options.holdercss && this.el.find("div.modal-dialog").addClass(this.options.holdercss), this.hasHeader(this.options.header).hasFooter(this.options.footer).withButtons(this.options.buttons) }, on: function (t, e) { var n = this.handlers[t]; return (null === n || void 0 === n) && (n = this.handlers[t] = []), n.push(e), this }, buttonMatchesFlag: function (t, e) { return (t.value & e) === t.value }, getButtonMatchFromArray: function (t, e) { var n = [], s = 0, o = t.length; for (s; o > s; s += 1) this.buttonMatchesFlag(t[s], e) && n.push(t[s]); return n }, _getButtonsByNumber: function (t) { var e, s, o = []; for (s in u) u.hasOwnProperty(s) && (e = u[s], n(e, "Array") ? o.concat(this.getButtonMatchFromArray(e, t)) : this.buttonMatchesFlag(e, t) && o.push(e)); return o }, _getButtons: function (t) { return n(t, "Array") ? t : [t] }, _createButtons: function (t, n) { for (var s = 0, o = n.length; o > s; s += 1) t.append(this._createButton(n[s])); t.bind("click", "button", function (t) { var n = e(t.target), s = n.attr("data-action"), o = this.handlers[s], i = !1; t.preventDefault(), i = o ? this.runHandler(o, s) : !0, i && this.hide() }.bind(this)) }, _createButton: function (t) { var n = e(this.options.buttonTemplate); return n.html(t.text || s(t.action)), n.attr("data-action", t.action), t.cssclass && n.addClass(t.cssclass), t.icon && n.append(this._createIcon(t.icon)), n }, _createIcon: function (t) { return e('<i class="' + t + '"></i>') }, runHandler: function (t, e) { var n, s = !1, o = 0; if (!t) return s; for (n = t.length, o; n > o && !(s = t[o](this, e)) ; o = 2); return s }, withButtons: function (t) { var e = this.footer; return e.empty(), 0 === u ? this.hasFooter(!1) : ("number" == typeof t ? this._createButtons(e, this._getButtonsByNumber(t)) : this._createButtons(e, this._getButtons(t)), this) }, withBody: function (t) { return "string" == typeof t ? this.body.html(i(t)) : (this.body.empty(), this.body.append(t)), this }, withTitle: function (t, e) { var n = this.header; return n.find("h4>span").html(i(t)), e && e.cssclass && n.addClass(e.cssclass), this.options.icon ? n.find("i").attr("class", this.options.icon).show() : n.find("i").hide(), this }, hasHeader: function (t) { return this.options.header = t, t ? this.header.show() : this.header.hide(), this }, hasFooter: function (t) { return this.options.footer = t, t ? this.footer.show() : this.footer.hide(), this }, show: function () { return this.el.modal("show"), this }, hide: function () { return null !== this.el && this.el.modal("hide"), this }, destroy: function () { this.hide(), this._destroyed || (this.runHandler(this.handlers.destroy, "destroy"), this.el.data("modal", null), this.el.empty().remove(), this.header = null, this.footer = null, this.body = null, this.el = null, this._destroyed = !0, l[this._id] = null, delete l[this._id]) } }; var m = { _reg: function (t) { l[t._id] = t }, get: function (t) { var e; for (e in l) if (l.hasOwnProperty(e) && l[e].id === t) return l[e]; return null }, alert: function () { var t = a.apply(null, arguments); return t[3] = e.extend({}, p, t[3]), this.dialog.apply(this, t) }, dialog: function () { var t; return t = d ? this.dialogObjCreate(arguments) : this._dialognoObjCreate(arguments), this._reg(t), t }, fs: function () { var n = a.apply(null, arguments), s = null, o = null; return n[3] = e.extend({}, f, n[3]), o = n[3].sizeF || function () { var t = s.options.header ? s.header.outerHeight() : 0, e = s.options.footer ? s.footer.outerHeight() : 0, n = s.el.find(".modal-content").outerHeight(); s.body.css("height", n - (t + e) + "px") }, s = m.dialog.apply(this, n), e(t).on("resize", o), s.on("shown", o), s.on("destroy", function () { e(t).off("resize", o) }), s }, dialogObjCreate: function (t) { var e = Object.create(r.prototype); return e.constructor.apply(e, t) }, _dialognoObjCreate: function (t) { var e, n = function () { }; return n.prototype = r.prototype, e = new n, r.apply(e, t), e } }; t.elimbox = r, t.elimboxes = m, t.elimboxes.buttons = u }(this, this.$);
